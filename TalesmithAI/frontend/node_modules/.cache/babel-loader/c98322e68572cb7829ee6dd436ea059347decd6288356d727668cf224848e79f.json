{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import'./Dashboard.css';import'bootstrap/dist/css/bootstrap.min.css';import axiosInstance from'./axiosSetup';// Import axiosInstance from axiosSetup.js\nimport{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faBars,faTimes}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[isSidebarOpen,setIsSidebarOpen]=useState(false);const[isDropdownOpen,setIsDropdownOpen]=useState(false);const[reportType,setReportType]=useState('');const[users,setUsers]=useState([]);const[filteredUsers,setFilteredUsers]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[error,setError]=useState('');const handleGenerateReport=useCallback(async()=>{try{const response=await axiosInstance.get(\"/api/user_report/?type=\".concat(reportType));setUsers(response.data.users);setFilteredUsers(response.data.users);setError('');// Clear any previous error\n}catch(error){console.error('Error generating report:',error);setError('Error generating report. Please try again.');}},[reportType]);useEffect(()=>{if(reportType){handleGenerateReport();}},[reportType,handleGenerateReport]);useEffect(()=>{const filtered=users.filter((user,index)=>{const searchString=\"\".concat(index+1,\" \").concat(user.email,\" \").concat(user.username).toLowerCase();return searchString.includes(searchTerm.toLowerCase());});setFilteredUsers(filtered);},[searchTerm,users]);return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header text-white p-3\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"m-0\",children:\"TalesmithAI Dashboard\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon\",onClick:()=>setIsSidebarOpen(!isSidebarOpen),children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faBars,color:\"white\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-part col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebar-dashboard \".concat(isSidebarOpen?'open':''),children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-icon close-btn\",onClick:()=>setIsSidebarOpen(false),children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes,color:\"black\"})}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsDropdownOpen(!isDropdownOpen),children:\"Reports\"}),isDropdownOpen&&/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{onClick:()=>setReportType('All'),children:\"All Users\"})})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"table-data col-md-9\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"report\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control mb-3\",placeholder:\"Search by serial number, email, or username\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Active\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Joined\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredUsers.map((user,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.is_active?'Yes':'No'}),/*#__PURE__*/_jsx(\"td\",{children:new Date(user.timestamp).toLocaleDateString()})]},index))})]})})]})})]})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useCallback","axiosInstance","FontAwesomeIcon","faBars","faTimes","jsx","_jsx","jsxs","_jsxs","Dashboard","isSidebarOpen","setIsSidebarOpen","isDropdownOpen","setIsDropdownOpen","reportType","setReportType","users","setUsers","filteredUsers","setFilteredUsers","searchTerm","setSearchTerm","error","setError","handleGenerateReport","response","get","concat","data","console","filtered","filter","user","index","searchString","email","username","toLowerCase","includes","className","children","onClick","icon","color","type","placeholder","value","onChange","e","target","map","is_active","Date","timestamp","toLocaleDateString"],"sources":["C:/Users/hp/Desktop/fyp/TalesmithAI/frontend/src/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport './Dashboard.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axiosInstance from './axiosSetup'; // Import axiosInstance from axiosSetup.js\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faBars, faTimes } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst Dashboard = () => {\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const [reportType, setReportType] = useState('');\r\n  const [users, setUsers] = useState([]);\r\n  const [filteredUsers, setFilteredUsers] = useState([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const handleGenerateReport = useCallback(async () => {\r\n    try {\r\n      const response = await axiosInstance.get(`/api/user_report/?type=${reportType}`);\r\n      setUsers(response.data.users);\r\n      setFilteredUsers(response.data.users);\r\n      setError(''); // Clear any previous error\r\n    } catch (error) {\r\n      console.error('Error generating report:', error);\r\n      setError('Error generating report. Please try again.');\r\n    }\r\n  }, [reportType]);\r\n\r\n  useEffect(() => {\r\n    if (reportType) {\r\n      handleGenerateReport();\r\n    }\r\n  }, [reportType, handleGenerateReport]);\r\n\r\n  useEffect(() => {\r\n    const filtered = users.filter((user, index) => {\r\n      const searchString = `${index + 1} ${user.email} ${user.username}`.toLowerCase();\r\n      return searchString.includes(searchTerm.toLowerCase());\r\n    });\r\n    setFilteredUsers(filtered);\r\n  }, [searchTerm, users]);\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      <header className=\"header text-white p-3\">\r\n        <h1 className=\"m-0\">TalesmithAI Dashboard</h1>\r\n      </header>\r\n      <button className=\"btn btn-icon\" onClick={() => setIsSidebarOpen(!isSidebarOpen)}>\r\n        <FontAwesomeIcon icon={faBars} color=\"white\" />\r\n      </button>\r\n      <div className=\"dashboard-container\">\r\n        <div className=\"row\">\r\n          <div className=\"sidebar-part col-md-3\">\r\n            <div className={`sidebar-dashboard ${isSidebarOpen ? 'open' : ''}`}>\r\n              <button className=\"btn btn-icon close-btn\" onClick={() => setIsSidebarOpen(false)}>\r\n                <FontAwesomeIcon icon={faTimes} color=\"black\" />\r\n              </button>\r\n              <ul className=\"list-unstyled\">\r\n                <li>\r\n                  <button onClick={() => setIsDropdownOpen(!isDropdownOpen)}>\r\n                    Reports\r\n                  </button>\r\n                  {isDropdownOpen && (\r\n                    <ul>\r\n                      <li onClick={() => setReportType('All')}>All Users</li>\r\n                    </ul>\r\n                  )}\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          <div className=\"table-data col-md-9\">\r\n            <div className=\"report\">\r\n              {error && <div className=\"alert alert-danger\">{error}</div>}\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control mb-3\"\r\n                placeholder=\"Search by serial number, email, or username\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n              />\r\n              <div className=\"table-responsive\">\r\n                <table className=\"table table-bordered table-striped\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>#</th>\r\n                      <th>Email</th>\r\n                      <th>Username</th>\r\n                      <th>Active</th>\r\n                      <th>Joined</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredUsers.map((user, index) => (\r\n                      <tr key={index}>\r\n                        <td>{index + 1}</td>\r\n                        <td>{user.email}</td>\r\n                        <td>{user.username}</td>\r\n                        <td>{user.is_active ? 'Yes' : 'No'}</td>\r\n                        <td>{new Date(user.timestamp).toLocaleDateString()}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}