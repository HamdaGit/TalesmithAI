{"ast":null,"code":"import React,{useState}from'react';import{CardElement,useStripe,useElements}from'@stripe/react-stripe-js';import axiosInstance from'./axiosSetup';import'./PaymentForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PaymentForm=()=>{const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const stripe=useStripe();const elements=useElements();const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError(null);if(!stripe||!elements){return;}const cardElement=elements.getElement(CardElement);try{const{error,paymentMethod}=await stripe.createPaymentMethod({type:'card',card:cardElement});if(error){setError(error.message);setLoading(false);return;}const response=await axiosInstance.post('/api/create-checkout-session/',{paymentMethodId:paymentMethod.id});const{clientSecret}=response.data;const{error:confirmError}=await stripe.confirmCardPayment(clientSecret);if(confirmError){setError(confirmError.message);}else{console.log('Payment successful');}}catch(err){setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"payment-form-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cardElement\",children:\"Card Details\"}),/*#__PURE__*/_jsx(CardElement,{id:\"cardElement\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!stripe||!elements,children:loading?'Processing...':'Submit Payment'})]})});};export default PaymentForm;","map":{"version":3,"names":["React","useState","CardElement","useStripe","useElements","axiosInstance","jsx","_jsx","jsxs","_jsxs","PaymentForm","loading","setLoading","error","setError","stripe","elements","handleSubmit","e","preventDefault","cardElement","getElement","paymentMethod","createPaymentMethod","type","card","message","response","post","paymentMethodId","id","clientSecret","data","confirmError","confirmCardPayment","console","log","err","className","children","onSubmit","htmlFor","disabled"],"sources":["C:/Users/hp/Desktop/fyp/TalesmithAI/frontend/src/PaymentForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\r\nimport axiosInstance from './axiosSetup';\r\nimport './PaymentForm.css';\r\n\r\nconst PaymentForm = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const stripe = useStripe();\r\n    const elements = useElements();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        if (!stripe || !elements) {\r\n            return;\r\n        }\r\n\r\n        const cardElement = elements.getElement(CardElement);\r\n\r\n        try {\r\n            const { error, paymentMethod } = await stripe.createPaymentMethod({\r\n                type: 'card',\r\n                card: cardElement,\r\n            });\r\n\r\n            if (error) {\r\n                setError(error.message);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const response = await axiosInstance.post('/api/create-checkout-session/', {\r\n                paymentMethodId: paymentMethod.id,\r\n            });\r\n\r\n            const { clientSecret } = response.data;\r\n\r\n            const { error: confirmError } = await stripe.confirmCardPayment(clientSecret);\r\n\r\n            if (confirmError) {\r\n                setError(confirmError.message);\r\n            } else {\r\n                console.log('Payment successful');\r\n            }\r\n        } catch (err) {\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"payment-form-container\">\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"cardElement\">Card Details</label>\r\n                    <CardElement id=\"cardElement\" />\r\n                </div>\r\n                {error && <div className=\"error\">{error}</div>}\r\n                <button type=\"submit\" disabled={loading || !stripe || !elements}>\r\n                    {loading ? 'Processing...' : 'Submit Payment'}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PaymentForm;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,CAAEC,SAAS,CAAEC,WAAW,KAAQ,yBAAyB,CAC7E,MAAO,CAAAC,aAAa,KAAM,cAAc,CACxC,MAAO,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE3B,KAAM,CAAAC,WAAW,CAAGA,CAAA,GAAM,CACtB,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAc,MAAM,CAAGZ,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAa,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAa,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBP,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CAACC,MAAM,EAAI,CAACC,QAAQ,CAAE,CACtB,OACJ,CAEA,KAAM,CAAAI,WAAW,CAAGJ,QAAQ,CAACK,UAAU,CAACnB,WAAW,CAAC,CAEpD,GAAI,CACA,KAAM,CAAEW,KAAK,CAAES,aAAc,CAAC,CAAG,KAAM,CAAAP,MAAM,CAACQ,mBAAmB,CAAC,CAC9DC,IAAI,CAAE,MAAM,CACZC,IAAI,CAAEL,WACV,CAAC,CAAC,CAEF,GAAIP,KAAK,CAAE,CACPC,QAAQ,CAACD,KAAK,CAACa,OAAO,CAAC,CACvBd,UAAU,CAAC,KAAK,CAAC,CACjB,OACJ,CAEA,KAAM,CAAAe,QAAQ,CAAG,KAAM,CAAAtB,aAAa,CAACuB,IAAI,CAAC,+BAA+B,CAAE,CACvEC,eAAe,CAAEP,aAAa,CAACQ,EACnC,CAAC,CAAC,CAEF,KAAM,CAAEC,YAAa,CAAC,CAAGJ,QAAQ,CAACK,IAAI,CAEtC,KAAM,CAAEnB,KAAK,CAAEoB,YAAa,CAAC,CAAG,KAAM,CAAAlB,MAAM,CAACmB,kBAAkB,CAACH,YAAY,CAAC,CAE7E,GAAIE,YAAY,CAAE,CACdnB,QAAQ,CAACmB,YAAY,CAACP,OAAO,CAAC,CAClC,CAAC,IAAM,CACHS,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACrC,CACJ,CAAE,MAAOC,GAAG,CAAE,CACVvB,QAAQ,CAACuB,GAAG,CAACX,OAAO,CAAC,CACzB,CAAC,OAAS,CACNd,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAED,mBACIL,IAAA,QAAK+B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,cACnC9B,KAAA,SAAM+B,QAAQ,CAAEvB,YAAa,CAAAsB,QAAA,eACzB9B,KAAA,QAAK6B,SAAS,CAAC,YAAY,CAAAC,QAAA,eACvBhC,IAAA,UAAOkC,OAAO,CAAC,aAAa,CAAAF,QAAA,CAAC,cAAY,CAAO,CAAC,cACjDhC,IAAA,CAACL,WAAW,EAAC4B,EAAE,CAAC,aAAa,CAAE,CAAC,EAC/B,CAAC,CACLjB,KAAK,eAAIN,IAAA,QAAK+B,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAE1B,KAAK,CAAM,CAAC,cAC9CN,IAAA,WAAQiB,IAAI,CAAC,QAAQ,CAACkB,QAAQ,CAAE/B,OAAO,EAAI,CAACI,MAAM,EAAI,CAACC,QAAS,CAAAuB,QAAA,CAC3D5B,OAAO,CAAG,eAAe,CAAG,gBAAgB,CACzC,CAAC,EACP,CAAC,CACN,CAAC,CAEd,CAAC,CAED,cAAe,CAAAD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}