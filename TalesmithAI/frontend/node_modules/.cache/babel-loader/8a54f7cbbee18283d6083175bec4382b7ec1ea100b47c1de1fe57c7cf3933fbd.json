{"ast":null,"code":"// src/components/Dashboard.jsx\nimport React,{useState,useEffect}from'react';import'./Dashboard.css';import'bootstrap/dist/css/bootstrap.min.css';import axiosInstance from'./axiosSetup';// Import axiosInstance from axiosSetup.js\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=()=>{const[isSidebarOpen,setIsSidebarOpen]=useState(false);const[isDropdownOpen,setIsDropdownOpen]=useState(false);const[reportType,setReportType]=useState('');const[users,setUsers]=useState([]);const[isAdmin,setIsAdmin]=useState(false);useEffect(()=>{const checkAdmin=async()=>{try{const response=await axiosInstance.get('/api/is_admin/');setIsAdmin(response.data.is_admin);}catch(error){console.error('Error checking admin status:',error);}};checkAdmin();},[]);const handleGenerateReport=async()=>{try{const response=await axiosInstance.get(\"/api/user_report/?type=\".concat(reportType));setUsers(response.data.users);}catch(error){console.error('Error generating report:',error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"admin-dashboard\",children:isAdmin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{className:\"header text-white p-3\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"m-0\",children:\"TalesmithAI Admin\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-3\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setIsSidebarOpen(!isSidebarOpen),children:\"Toggle Sidebar\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar \".concat(isSidebarOpen?'open':''),children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsDropdownOpen(!isDropdownOpen),children:\"Reports\"}),isDropdownOpen&&/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{onClick:()=>setReportType('Subscribed'),children:\"Subscribed Users\"}),/*#__PURE__*/_jsx(\"li\",{onClick:()=>setReportType('Unsubscribed'),children:\"Unsubscribed Users\"}),/*#__PURE__*/_jsx(\"li\",{onClick:()=>setReportType('All'),children:\"All Users\"})]})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-9\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleGenerateReport,children:\"Generate Report\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"report\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[reportType,\" Users\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled\",children:users.map((user,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",user.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Active: \",user.is_active?'Yes':'No']}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Joined: \",new Date(user.timestamp).toLocaleDateString()]})]},index))})]})]})]})})]})});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","axiosInstance","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","isSidebarOpen","setIsSidebarOpen","isDropdownOpen","setIsDropdownOpen","reportType","setReportType","users","setUsers","isAdmin","setIsAdmin","checkAdmin","response","get","data","is_admin","error","console","handleGenerateReport","concat","className","children","onClick","map","user","index","email","username","is_active","Date","timestamp","toLocaleDateString"],"sources":["C:/Users/hp/Desktop/fyp/TalesmithAI/frontend/src/Dashboard.jsx"],"sourcesContent":["// src/components/Dashboard.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport './Dashboard.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axiosInstance from './axiosSetup'; // Import axiosInstance from axiosSetup.js\r\n\r\nconst Dashboard = () => {\r\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const [reportType, setReportType] = useState('');\r\n  const [users, setUsers] = useState([]);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkAdmin = async () => {\r\n      try {\r\n        const response = await axiosInstance.get('/api/is_admin/');\r\n        setIsAdmin(response.data.is_admin);\r\n      } catch (error) {\r\n        console.error('Error checking admin status:', error);\r\n      }\r\n    };\r\n    checkAdmin();\r\n  }, []);\r\n\r\n  const handleGenerateReport = async () => {\r\n    try {\r\n      const response = await axiosInstance.get(`/api/user_report/?type=${reportType}`);\r\n      setUsers(response.data.users);\r\n    } catch (error) {\r\n      console.error('Error generating report:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"admin-dashboard\">\r\n      {isAdmin && (\r\n        <>\r\n          <header className=\"header text-white p-3\">\r\n            <h1 className=\"m-0\">TalesmithAI Admin</h1>\r\n          </header>\r\n          <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n              <div className=\"col-3\">\r\n                <button className=\"btn btn-primary\" onClick={() => setIsSidebarOpen(!isSidebarOpen)}>\r\n                  Toggle Sidebar\r\n                </button>\r\n                <div className={`sidebar ${isSidebarOpen ? 'open' : ''}`}>\r\n                  <ul className=\"list-unstyled\">\r\n                    <li>\r\n                      <button onClick={() => setIsDropdownOpen(!isDropdownOpen)}>\r\n                        Reports\r\n                      </button>\r\n                      {isDropdownOpen && (\r\n                        <ul>\r\n                          <li onClick={() => setReportType('Subscribed')}>Subscribed Users</li>\r\n                          <li onClick={() => setReportType('Unsubscribed')}>Unsubscribed Users</li>\r\n                          <li onClick={() => setReportType('All')}>All Users</li>\r\n                        </ul>\r\n                      )}\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div className=\"col-9\">\r\n                <button className=\"btn btn-secondary\" onClick={handleGenerateReport}>\r\n                  Generate Report\r\n                </button>\r\n                <div className=\"report\">\r\n                  <h2>{reportType} Users</h2>\r\n                  <ul className=\"list-unstyled\">\r\n                    {users.map((user, index) => (\r\n                      <li key={index}>\r\n                        <p>Email: {user.email}</p>\r\n                        <p>Username: {user.username}</p>\r\n                        <p>Active: {user.is_active ? 'Yes' : 'No'}</p>\r\n                        <p>Joined: {new Date(user.timestamp).toLocaleDateString()}</p>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}